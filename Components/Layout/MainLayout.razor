@inherits LayoutComponentBase

<MudThemeProvider @bind-IsDarkMode="IsDarkMode" Theme="MudTheme" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <NavBar OnMenuToggle="ToggleMenu" OnThemeToggle="ToggleTheme" />
    <NavMenu Open="Open" />
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

<MudAlert Severity="Severity.Error" Variant="Variant.Filled" id="blazor-error-ui">
    <MudStack Row Spacing="1">
        <MudText>@Localizer["UnhandledErrorOccurred"]</MudText>
        <MudLink Href="" Class="reload">@Localizer["Reload"]</MudLink>
    </MudStack>
    <MudLink Class="dismiss">🗙</MudLink>
</MudAlert>

@code {
    private MudTheme MudTheme = new MudTheme
    {
        PaletteLight = new PaletteLight
        {
            AppbarBackground = Colors.Orange.Default,
            AppbarText = Colors.Shades.White,
            DrawerBackground = Colors.Gray.Lighten4,
            DrawerIcon = Colors.Orange.Default,
            HoverOpacity = 0.1
        },
        PaletteDark = new PaletteDark
        {
            AppbarBackground = Colors.Amber.Darken3,
            AppbarText = Colors.Shades.White,
            DrawerBackground = Colors.Gray.Darken4,
            DrawerIcon = Colors.Orange.Default,
            DrawerText = Colors.Shades.White
        },
        Typography = new Typography
        {
            Default = new Default
            {
                FontFamily = new[] { "Lexend" }
            }
        },
    };

    private bool Open { get; set; } = true;
    private bool IsDarkMode { get; set; }

    private void ToggleMenu() => Open = !Open;

    private void ToggleTheme(bool isDarkMode) => IsDarkMode = isDarkMode;
}
